O Framework Decisioner organiza e gerencia os componentes gerais dos
SADs de avalia√ß√£o. Cada SAD tem particularidades que precisam ser
definidas e ajustadas para configurar suas funcionalidades. As ontologias
espec√≠ficas do dom√≠nio e as DSL, explicadas nos cap√≠tulos anteriores
fornecem o meio de defini√ß√£o dessas particularidades. 

O SAD SustenAgro foi usado como a primeira instancia√ß√£o do Framework
Decisioner. Ele √© composto por uma ontologia de dom√≠nio, DSL e elementos
gr√°ficos de design (√≠cones, imgens de fundo, etc.) que permitem instanci√°-lo
no Decisioner. Sendo seu principal componente a ontologia do dom√≠nio
de avalia√ß√£o da sustentabilidade da produ√ß√£o de cana-de-a√ßucar na
regi√£o centro-sul do Brasil..

Nest cap√≠tulo, ser√£o explicadas a arquitetura, a metodologia e os
componentes mais importantes do SAD SustenAgro. Ser√£o feitas tamb√©m
algumas considera√ß√µes sobre o processo de defini√ß√£o do SAD.

\section{Arquitetura do SustenAgro}

O SAD SustenAgro serviu de base para modelar e desenvolver os componentes
que fazem parte do Decisioner. Por isso, o processo real de desenvolvimento
dele foi muito mais complicado que uma simples instancia√ß√£o de um
framework. Ele envolveu diversas itera√ß√µes para determinar o que deveria
ser implementado como parte do framework e como parte da aplica√ß√£o.
Para simplificar o texto e facilitar o entendimento de como o framework
Decisioner √© usado para instanciar um SAD, as diversas vers√µes do
framework n√£o ser√£o discutidas.

A arquitetura de um SAD implementado usando o Framework Decisioner
tem os seguintes componentes:
\begin{enumerate}
\item Ontologia do dom√≠nio: ontologia que representa os conceitos do dom√≠nio.
No caso do SustenAgro, o dom√≠nio √© a avalia√ß√£o da sustentabilidade
do sistema produtivo de cana-de-a√ß√∫car, na regi√£o centro-sul. Essa
ontologia √© a base para o SAD pois permite estabelecer os conceitos
fundamentais, que s√£o utilizados pelo sistema. No caso do SustenAgro,
eles s√£o: indicadores, componentes de indicadores, √≠ndices, dimens√µes
da sustentabilidade, recomenda√ß√µes e o m√©todo de avalia√ß√£o.
\item DSL: programa descrevendo a configura√ß√£o e comportamento do SAD. Ele
especifica as \foreignlanguage{english}{features} do dom√≠nio a serem
usadas, as f√≥rmulas do modelo e o aspecto e estrutura do relat√≥rio
a ser gerado. No caso do SustenAgro, as \foreignlanguage{english}{features}
s√£o os indicadores, as formulas calculam os √≠ndices de sustentabilidade
e produtividade, e o relat√≥rio usa a Matriz e o Sem√°foro de Sustentabilidade.
\selectlanguage{english}%
\item Web components\foreignlanguage{brazil}{: o SustenAgro usa dois }Web
Components\foreignlanguage{brazil}{ espec√≠ficos (al√©m das oferecidas
pelo Decisioner): a Matriz de Sustentabilidade e o Sem√°foro de Sustentabilidade.
Ambas s√£o implementadas usando a biblioteca Polymer da Google.}
\selectlanguage{brazil}%
\item Imagens e layout: Um conjunto de imagens e arquivos de layout (css)
comp√µem o \foreignlanguage{english}{look-and-feel} espec√≠fico do SAD,
incluindo seu logo.
\end{enumerate}

\section{Metodologia.\label{sec:Metodologia}}

O conhecimento do dom√≠nio abrangido no sistema SustenAgro est√° em
cont√≠nua evolu√ß√£o. Por isso, foi necess√°rio usar uma metodologia que
suporte mudan√ßas na estrutura e nos dados do sistema, durante cada
uma das fases do desenvolvimento. O desenvolvimento da ontologia de
dom√≠nio SustenAgro foi realizada de forma √°gil e modular, por meio
de t√©cnicas de prototipa√ß√£o r√°pida, abrangendo grupos de conceitos
relacionados entre si.

O desenvolvimento da ontologia depende essencialmente da comunica√ß√£o
entre os especialistas de dom√≠nio e os modeladores. Dessa forma, foram
definidos meios de comunica√ß√£o (reuni√µes presenciais e virtuais) e
de representa√ß√£o do conhecimento (modelos conceituais), que permitiram
explorar o dom√≠nio. 

Um dos meios, que permitiu uma melhor comunica√ß√£o, foi o desenvolvimento
de um mapa conceitual, por meio da ferramenta Cmap Tools\footnote{http://cmap.ihmc.us/},
com a participa√ß√£o de um grupo de especialistas em modelagem de conhecimento.
Esse processo come√ßou em uma reuni√£o da equipe na Embrapa Inform√°tica
Agropecu√°ria (situada situada na Universidade Estadual de Campinas,
UNICAMP). Nessa reuni√£o, um especialista em desenvolvimento de ontologias
da Embrapa forneceu treinamento sobre a metodologia para definir ontologias,
desenvolvimento de mapas conceituais, com os principais conceitos,
e desenvolvimento de modelos em \foreignlanguage{english}{OWL,} para
tornar esse conehcimento comput√°vel.

Ap√≥s realizada a modelagem, o especialista do dom√≠nio definiu perguntas
de interesse, com as quais os modeladores (o autor e um colega de
mestrado) definiram consultas que o sistema deveria responder segundo
os resultados esperados, conseguindo validar e ajustar o modelo at√©
ter um prot√≥tipo confi√°vel.

Na Figura \ref{fig:Methodology} √© apresentada a metodologia para
desenvolver a ontologia SustenAgro, a qual teve v√°rios ciclos de desenvolvimento
nos quais foram integradas novas carater√≠sticas.

\begin{figure}[H]
\noindent \begin{centering}
\includegraphics[width=1\columnwidth]{\string"figures/Ontology Methodology\string".eps}
\par\end{centering}
\caption{Metodologia de defini√ß√£o da ontologia SustenAgro.\label{fig:Methodology}}
\end{figure}

Um aspecto importante das ontologias √© que elas fornecem um formato
que adapta-se √†s mudan√ßas do dom√≠nio e permite separar o conhecimento
dos outros componentes do sistema.

A metodologia, que direcionou o desenvolvimento do SAD SustenAgro,
foi \foreignlanguage{english}{a SCRUM} \citep{schwaber2002gile},
que permitiu integrar pr√°ticas √°geis no desenvolvimento do sistema.
Nesse contexto, o termo √°gil refere-se ao desenvolvimento em tempos
curtos e gera√ß√£o de prot√≥tipos facilmente adapt√°veis √†s mudan√ßas.
Cada uma das etapas da metodologia foi realizada v√°rias vezes e, por
isso, foi necess√°rio redesenhar os componentes. As metodologias √°geis
s√£o c√≠clicas e os prot√≥tipos mudam em cada ciclo para cumprir os novos
requisitos.

\label{A-metodologia-de-UI}A metodologia de desenvolvimento dos \foreignlanguage{english}{Web
Components} e das \foreignlanguage{english}{Web UI}  tiveram um enfoque
baseado em \foreignlanguage{english}{User Centered Design}. A avalia√ß√£o
dessas duas interfaces foi realizada integradamente para validar
se os requisitos identificados. 

O processo de design das \foreignlanguage{english}{web UI} incluiu
as seguintes etapas de levantamento de requisitos:
\begin{enumerate}
\item Descri√ß√£o de \foreignlanguage{english}{User Stories:} t√©cnica de desenvolvimento
√°gil que permite descrever caracter√≠sticas do software desde a perspectiva
do usu√°rio. Ela fornece uma identifica√ß√£o dos usu√°rios, das funcionalidades
e explica o porque uma dita funcionalidade √© necess√°ria. 
\item Descri√ß√£o de \foreignlanguage{english}{Scenarios:} t√©cnica de desenvolvimento
√°gil que permite descrever detalhadamente as caracter√≠sticas das \foreignlanguage{english}{user
stories}.
\item Descri√ß√£o de \foreignlanguage{english}{Storyboard\emph{s:}} descreve
cada uma das intera√ß√µes do usu√°rio com o sistema em uma determinada
tarefa, visualizando a intera√ß√£o como uma hist√≥ria em quadrinhos.
\item Descri√ß√£o de \foreignlanguage{english}{\emph{Mockups:}} design do
esbo√ßo da interface gr√°fica do sistema. Eles foram analisados pelos
especialistas da Embrapa, para avaliar se atendiam √†s funcionalidades
b√°sicas descritas no levantamento dos requisitos.
\item Desenvolvimento de prot√≥tipo visual: A partir da valida√ß√£o dos \foreignlanguage{english}{Mockups,}
foi desenvolvido um prot√≥tipo da interface gr√°fica, com a finalidade
de que os especialistas do dom√≠nio avaliassem se as interfaces cumpriam
com os requisitos.
\end{enumerate}
Cada uma dessas etapas de desenvolvimento, foram realizadas sempre
em parceria com os especialistas do dom√≠nio. Isso foi importante para
realizar o levantamento correto de requisitos tanto das web UI como
das funcionalidades do SAD, identificadas a partir destas t√©cnicas.
Todo esse processo foi necess√°rio pois n√£o existia uma defini√ß√£o especifica
do que os especialistas precisavam.

\section{Ontologia de dom√≠nio: SustenAgro\label{sec:Ontologia-do-dom=0000EDnio}}

A ontologia SustenAgro representa o conhecimento necess√°rio para suportar
avalia√ß√£o de sustentabilidade no sistema produtivo de cana-de-a√ß√∫car
na regi√£o centro-sul do Brasil. Ela representa conceitos por meio
de entidades, classes, rela√ß√µes sem√¢nticas e axiomas. Esses elementos
organizam e representam a realidade modelada. 

Para definir a ontologia SustenAgro, realizou-se uma pesquisa das
fontes de dados relacionadas com ontologias do dom√≠nio de avalia√ß√£o
de sustentabilidade em sistemas produtivos de cana-de-a√ß√∫car. Concluiu-se
que n√£o existem ontologias que suportassem esse dom√≠nio. Por isso,
prop√¥s-se desenvolver uma ontologia que utilizasse conceitos sobre
avalia√ß√£o de sustentabilidade e sistemas agr√≠colas. Essa ontologia
representa conceitos gerais de conceitos identificados na literatura
e conceitos particulares ao SustenAgro, identificados por \citet{oliveira:2013}. 

Deve-se destacar que a ontologia SustenAgro abrange um dom√≠nio bem
espec√≠fico: sustentabilidade de sistemas produtivos de cana-de-a√ßucar
na regi√£o centro-sul do Brasil. Acreditamos que essa √© uma caracter√≠stica
deste tipo de SAD. Modelamentos desse tipo tendem a ser espec√≠ficos.
No caso do Sustenagro, ele abrange apenas um s√≥ sistema produtivo
em uma regi√£o espec√≠fica.

A figura \ref{fig:ontology-conceptual-map} representa um mapa conceitual
com os principais conceitos modelados no SustenAgro e como eles est√£o
relacionados entre si. As etiquetas, em cada rela√ß√£o dos conceitos,
permitem identificar a rela√ß√£o entre os dois conceitos.

As ontologias da web sem√¢ntica permitem separar o conhecimento do
dom√≠nio da l√≥gica da computa√ß√£o, independizando o desenvolvimento
destes aspectos do SAD.

\begin{figure}[H]
\begin{centering}
\includegraphics[width=0.8\columnwidth]{\string"figures/SustenAgro conceptual map\string".eps}
\par\end{centering}
\caption{Mapa conceitual da ontologia SustenAgro.\label{fig:ontology-conceptual-map}}
\end{figure}

Para conseguir que a ontologia SustenAgro fosse comput√°vel, foi necess√°rio
defini-la na linguagem \foreignlanguage{english}{OW}L (fornecendo
uma representa√ß√£o compreens√≠vel por humanos e computadores). O editor
de ontologias Prot√©g√©\footnote{\url{http://protege.stanford.edu/}}
foi usado, permitindo modelar o conhecimento e exportar ele ao formato
\foreignlanguage{english}{RDF}, para ser compat√≠vel com sistemas \foreignlanguage{english}{triple-stores}
(se√ß√£o \ref{subsec:Triplestore}) \citep{allemang2011semantic}. 

\selectlanguage{english}%
Triplestores\foreignlanguage{brazil}{ suportam a realiza√ß√£o de consultas
complexas para permitir a resposta a perguntas de interesse aos usu√°rios
do sistema.  Esta carater√≠stica permite a recupera√ß√£o da informa√ß√£o
com significado sem√¢ntico, permitindo que os sistemas deem respostas
√†s consultas complexas de interesse. Tamb√©m o RDF suporta a integra√ß√£o
de conhecimento externo existente em formatos da web sem√¢ntica, como
s√£o v√°rios sistemas de representa√ß√£o do conhecimento como dicion√°rios,
}thesaurus\foreignlanguage{brazil}{ e redes sem√¢nticas, o que permite
aumentar as possibilidades de desenvolvimento de novas funcionalidades. }

\selectlanguage{brazil}%
A ontologia do SustenAgro modela o conhecimento dos especialistas
baseando-se na ontologia do Decisioner (Figura \ref{fig:Modelagem-do-SAD}).
Ela inclui a ontologia Decisioner e define conceitos gerais dos SADs.
Isso √© obrigat√≥rio, pois o c√≥digo do framework Decisioner entende
os conceitos da ontologia SustenAgro apenas porque eles tamb√©m s√£o
conceitos v√°lidos derivados da ontologia Decisioner. Exemplos de conceitos/classes
modelados s√£o: \foreignlanguage{english}{\textit{Production Unit}}\textit{,
}\foreignlanguage{english}{\textit{Microregion, Indicator}}\textit{,}
\foreignlanguage{english}{\textit{Categorical}}. A partir dessas classes
foi poss√≠vel desenvolver o modelo de dados em \foreignlanguage{english}{OWL}, 

As classes da ontologia SustenAgro s√£o relacionados por meio de \foreignlanguage{english}{\textit{Object
Properties}} e \foreignlanguage{english}{\textit{Data Properties}}
que permitem vincular semanticamente as inst√¢ncias das classes. A
principal contribui√ß√£o da ontologia do dom√≠nio √© ser uma representa√ß√£o
sem√¢ntica do conhecimento de dom√≠nio, tanto para os usu√°rios como
para o sistema computacional, tornando-se um meio de comunica√ß√£o entre
os especialistas de dom√≠nio e os programadores.

Nas pr√≥ximas se√ß√µes, ser√£o apresentadas as principais classes modeladas
na ontologia do dom√≠nio de avalia√ß√£o da sustentabilidade (SustenAgro).
\selectlanguage{english}%

\subsection*{Production Unit}

\selectlanguage{brazil}%
Representa as organiza√ß√µes que podem ser avaliadas pelo sistema SustenAgro.
Atualmente elas podem ser \textit{Fornecedores de cana-de-a√ß√∫car}
e / ou \textit{Usinas processadoras de cana-de-a√ß√∫car}. Cada processo
de avalia√ß√£o requer dados que identifiquem as unidades produtivas
atrav√©s de propriedades que as definam.

Esta classe tem propriedades obrigat√≥rias como:
\selectlanguage{english}%
\begin{itemize}
\item hasAgriculturalProductionSystem\foreignlanguage{brazil}{: relaciona
o sistema de produ√ß√£o agr√≠cola em avalia√ß√£o.}
\selectlanguage{brazil}%
\item hasAvailabilityOfEvaluationResults: relaciona o tipo de disponibiliza√ß√£o
dos resultados.
\item hasSugarcaneSource: relaciona a origem da cana.
\item harvestYear: define o ano da safra.
\item canavialLongevity: define a longevidade do canavial.
\end{itemize}
\selectlanguage{brazil}%
A Figura \ref{fig:Modelagem-unidade-produtiva} apresenta a modelagem
da classe \foreignlanguage{english}{Production Unit}, feita na ferramenta
Prot√©g√©.

\begin{figure}[H]
\noindent \begin{centering}
\includegraphics[width=0.6\columnwidth]{figures/ProductionUnit}
\par\end{centering}
\caption{Modelagem da classe de unidade produtiva (ProductionUnity). \label{fig:Modelagem-unidade-produtiva}}
\end{figure}

\selectlanguage{english}%

\subsection*{\textit{Microregion}\foreignlanguage{brazil}{\textit{ }}}

\selectlanguage{brazil}%
Representam os locais onde s√£o localizadas as unidades produtivas.
√â permitido definir a microrregi√£o onde as fazendas e usinas do sistema
produtivo de cana-de-a√ß√∫car se localizam. Atualmente, a ontologia
tem os 7 estados pertencentes ao centro-sul do Brasil e as 243 microrregi√µes
dentro desses estados. Esses dados foram originalmente obtidos por
consulta SPARQL √† \foreignlanguage{english}{DB-pedia} e integrados
√† ontologia.

A Figura \ref{fig:Modelagem-de-Microrregi=0000E3o} mostra a modelagem
das localiza√ß√µes geogr√°ficas usadas no sistema SustenAgro, com algumas
inst√¢ncias de \foreignlanguage{english}{\textit{Microregion}}.

\begin{figure}[H]
\noindent \begin{centering}
\includegraphics[width=0.6\columnwidth]{figures/Microregion}
\par\end{centering}
\caption{Modelagem de microrregi√µes.\label{fig:Modelagem-de-Microrregi=0000E3o}}
\end{figure}

\selectlanguage{english}%

\subsection*{\textit{Indicator}}

\selectlanguage{brazil}%
Os indicadores s√£o o principal componente da ontologia. Eles foram
propostos por um grupo de especialistas de diversas √°reas da produ√ß√£o
agr√≠cola e sustentabilidade \citep{oliveira:2013}. 

Eles representam as caracter√≠sticas das unidades produtivas que ser√£o
identificadas e quantificadas em cada processo de avalia√ß√£o. Eles
tem uma propriedade \foreignlanguage{english}{\textit{Value}}\textit{
}que quantifica a sustentabilidade do indicador.

Tamb√©m permite a integra√ß√£o de conceitos, inclusive quando pertencem
a dom√≠nios sem rela√ß√£o aparente. Um exemplo disso √© a inter-rela√ß√£o
do conhecimento de sustentabilidade com conhecimento de interfaces
gr√°ficas de usu√°rio, que suporta a gera√ß√£o de SAD para avalia√ß√£o da
sustentabilidade. O conhecimento foi dividido em duas ontologias,
avalia√ß√£o de sustentabilidade e outra dos componentes gerais de um
SAD.

A Figura \ref{fig:Modelagem-de-Indicador} apresenta a hierarquia
dos indicadores, que est√° subdividida em \foreignlanguage{english}{Efficiency
Indicator} e \foreignlanguage{english}{Sustainability Indicator}.
Os \foreignlanguage{english}{Indicators} t√™m a propriedade \foreignlanguage{english}{\textit{has
value}}\textit{ }que vincula indiv√≠duos da classe \foreignlanguage{english}{\emph{Value}}\textit{
}que representa as op√ß√µes de resposta dos indicadores\textit{ .}
Existe outra propriedade, \foreignlanguage{english}{has weight,} que
√© opcional e estabelece um peso para o indicador\foreignlanguage{english}{\textit{.}}

A Figura \ref{fig:Modelagem-de-Indicador} mostra o indicador intitulado
\foreignlanguage{english}{\textit{Adequacy of boilers}}. Na propriedade
\foreignlanguage{english}{\textit{has value}} ele tem uma restri√ß√£o
que limita os valores dessa propriedade a valores de uma lista de
valores categ√≥ricos. A propriedade \foreignlanguage{english}{\textit{has
weight}} tamb√©m tem uma restri√ß√£o que limita seus valores a inst√¢ncias
da classe \foreignlanguage{english}{\textit{Sugarcane process Optimization}}.

\begin{figure}[H]
\noindent \begin{centering}
\includegraphics[width=0.6\columnwidth]{figures/Indicador}
\par\end{centering}
\caption{Modelagem de indicador \label{fig:Modelagem-de-Indicador}}
\end{figure}

Segundo a descri√ß√£o do m√©todo de avalia√ß√£o (Cap√≠tulo \ref{chap:Sustainability_Assessment}),
os indicadores de sustentabilidade s√£o classificados em tr√™s dimens√µes
de sustentabilidade: dimens√£o ambiental, dimens√£o social e dimens√£o
econ√¥mica. Tendo as tr√™s uma participa√ß√£o equitativa no m√©todo de
avalia√ß√£o \citep{kraines2011system}. 

A continua√ß√£o ser√£o apresentados cada uma das tr√™s dimens√µes.

\subsubsection*{Dimens√£o ambiental}

Nesta dimens√£o n√£o foi poss√≠vel identificar indicadores de tipo h√≠drico.
N√£o existe consenso entre os especialistas consultados sobre quais
s√£o os aspectos mais relevantes deles para a avalia√ß√£o da sustentabilidade,
por√©m, √© um aspecto fundamental para trabalhar nas futuras etapas
de pesquisa. 

A dimens√£o de indicadores ambientais, est√° composta dos seguintes
conceitos:

\begin{itemize}
\item Atributo solo (\foreignlanguage{english}{Soil Attribute}): indicadores
que avaliam os aspectos referentes √†s caracter√≠sticas do solo.
\item Atributo h√≠drico (\foreignlanguage{english}{Hydric Attribute}): indicadores
que avaliam os aspectos referentes √† disponibilidade e qualidade das
fontes h√≠dricas.
\item Atributo clima (\foreignlanguage{english}{Weather Attribute}): indicadores
que avaliam os aspectos clim√°ticos.
\end{itemize}

\subsubsection*{A dimens√£o social}

Nesta dimens√£o √© importante reconhecer que as unidades produtivas,
sejam do tipo fazendas ou usinas, t√™m v√≠nculos com pessoas tanto internamente
como externamente. Por isso, √© importante refinar os indicadores para
incluir a popula√ß√£o externa √† unidade produtiva que √© afetada pelas
pr√°ticas produtivas.

A Ag√™ncia Paulista de Tecnologia dos Agroneg√≥cios (APTA\nomenclature{APTA}{Ag√™ncia Paulista de Tecnologia dos Agroneg√≥cios})
forneceu dados econ√¥micos das principais usinas do estado de S√£o Paulo,
que permitiram definir a dimens√£o econ√¥mica das unidades produtivas
na ontologia de dom√≠nio.

A dimens√£o social est√° composta dos seguintes conceitos:

\begin{itemize}
\item Atributo emprego e renda (\foreignlanguage{english}{Employment and
Income Attribute}): indicadores que avaliam os aspectos referentes
√† m√£o de obra.
\item Atributo sa√∫de (\foreignlanguage{english}{Health Attribute}): indicadores
que avaliam os aspectos de seguran√ßa dos trabalhadores.
\item Atributo treinamento (\foreignlanguage{english}{Training Attribute}):
indicadores que avaliam os aspectos da capacita√ß√£o dos trabalhadores.
\end{itemize}

\subsubsection*{A dimens√£o econ√¥mica}

Esta dimens√£o est√° composta dos seguintes conceitos:

\begin{itemize}
\item Atributo industrial (Industrial Atribute): indicadores que avaliam
os aspectos industriais. 
\item Atributo √°rea recuperada (Recovered Area Atribute): indicadores que
avaliam os aspectos da √°rea produtiva e das t√©cnicas produtivas.
\item Atributo produtividade (Porductivity Atribute): indicadores que avaliam
os aspectos dos produtos e dos processos produtivos.
\item Atributo custo (Cost Atribute): indicadores que avaliam os aspectos
dos custos da produ√ß√£o. 
\end{itemize}
Cada uma das tr√™s dimens√µes deve ser avaliada equitativamente para
gerar um resultado coerente com a teoria da sustentabilidade agr√≠cola\citep{tilman2002agricultural}. 

\subsubsection*{Modelagem do m√©todo de avalia√ß√£o SustenAgro}

A Figura \ref{fig:Method} mostra um mapa conceitual dos conceitos
envolvidos na avalia√ß√£o da sustentabilidade, na qual recebe como entrada
os indicadores selecionados pelos usu√°rios e aplica as formulas de
avalia√ß√£o para gerar os √≠ndices de sustentabilidade e efici√™ncia.
 Desta maneira √© poss√≠vel quantificar a sustentabilidade.

\begin{figure}[H]
\begin{centering}
\includegraphics[width=1\textwidth]{figures/metodo}
\par\end{centering}
\caption{Mapa conceitual - M√©todo de Avalia√ß√£o.\label{fig:Method}}
\end{figure}

As dimens√µes da sustentabilidade permitiram organizar os indicadores,
levando essa organiza√ß√£o desde os modelos de mapas conceituais, √†s
ontologias, m√©todo de avalia√ß√£o e, finalmente, at√© a representa√ß√£o
dos resultados nas web UI dos SADs.
\selectlanguage{english}%

\subsection*{Subclasses of Categorical}

\selectlanguage{brazil}%
A classe \foreignlanguage{english}{Categorical} representa os poss√≠veis
\foreignlanguage{english}{Value} discretos que um \foreignlanguage{english}{\textit{Indicator}}
pode ter na forma de categorias (por exemplo, Existe e N√£o Existe).
Um \foreignlanguage{english}{Value} tamb√©m pode ser Real ou Inteiro.
A classe Categorical √© definida na ontologia Decisioner, mas a SustenAgro
cria diversas classes filhas para definir uma s√©rie de valores categ√≥ricos.

Cada subclasse de \foreignlanguage{english}{Categorical} √© composta
por um conjunto finito de elementos ou valores. Cada valor √© modelado
como indiv√≠duo da classe, permitindo assim, restringir as op√ß√µes de
instancia√ß√£o de cada indicador.

Na Figura \ref{fig:Modelagem-de-Value}, √© apresentada a classe \foreignlanguage{english}{\textit{Value}}
e suas subclasses, tanto \foreignlanguage{english}{\textit{Categorical}}
para conjunto finito de valores e \foreignlanguage{english}{\textit{Real}}
para valores num√©ricos. Um exemplo de classe categ√≥rica seria a \foreignlanguage{english}{\textit{Yes/No}}
que representa os valores de sim e n√£o e √© composta pela lista de
indiv√≠duos \foreignlanguage{english}{Yes} e No.

Cada individuo da classe \foreignlanguage{english}{\textit{Value}}
tem a propriedade \foreignlanguage{english}{\textit{as number}}\textit{
}que relaciona a ele um valor num√©rico. Esse valor define um crit√©rio
de compara√ß√£o entre os indiv√≠duos da mesma classe. Ele √© usado nas
f√≥rmulas do m√©todo de avalia√ß√£o.

\begin{figure}[H]
\begin{centering}
\includegraphics[scale=0.6]{figures/Value}
\par\end{centering}
\caption{Modelagem de \foreignlanguage{english}{Value}\label{fig:Modelagem-de-Value}}
\end{figure}

\selectlanguage{english}%

\section{SustenAgro Web UI\label{sec:Web-UI}}

\selectlanguage{brazil}%
O design das interfaces gr√°ficas e desenvolvimento dos web componentes
foram realizados por meio da v√°rias t√©cnicas de levantamento de requerimentos
para especificar as funcionalidades que os especialistas precisavam
do sistema SustenAgro. Foram usadas as seguintes t√©cnicas: \foreignlanguage{english}{User
Stories}, \foreignlanguage{english}{Scenarios}, \foreignlanguage{english}{Storyboard},
\foreignlanguage{english}{Mockups} e prot√≥tipo de interface gr√°fica.

Na fase inicial, foram definidos os perfis de usu√°rios do SAD SustenAgro,
inicialmente definiram-se os perfis descritos a seguir: 
\begin{itemize}
\item Administrador: usu√°rio com permiss√µes para editar Ontologias, DSL
e web UI. Ele √© o respons√°vel pela administra√ß√£o do SAD e tem todas
as permiss√µes do sistema.
\item Especialista de dom√≠nio: especialista em sustentabilidade ou afins,
com permiss√µes para recuperar e gerenciar informa√ß√µes das avalia√ß√µes,
gerar reportes e mudar os conceitos relacionados com os indicadores
e m√©todo de avalia√ß√£o.
\item Usu√°rio final: usu√°rio padr√£o do sistema que tem permiss√µes para realizar
avalia√ß√µes de sustentabilidade em cana-de-a√ß√∫car e de gerenciar os
dados cadastrados por ele. 
\end{itemize}
No SAD SustenAgro v1.0, foi removido o perfil especialista, ficando
apenas os perfis administrador e usu√°rio final. As fun√ß√µes desse perfil
foram inclu√≠das no perfil administrador.

As t√©cnicas realizadas para desenvolver as web UI, s√£o descritas a
seguir.
\selectlanguage{english}%

\subsection*{User Stories}

\selectlanguage{brazil}%
Hist√≥rias de usu√°rio s√£o uma t√©cnica para descrever, de uma forma
curta e simples, as caracter√≠sticas do sistema a partir da perspectiva
do usu√°rio ou cliente do sistema, gerando uma defini√ß√£o de alto n√≠vel
de um requisito. O padr√£o √©: como um ‚Äútipo de usu√°rio‚Äù, quero atingir
‚Äúalgum objetivo‚Äù para ‚Äúalguma finalidade‚Äù.

Na aplica√ß√£o dessa t√©cnica foram obtidas as seguintes hist√≥rias:
\begin{enumerate}
\item O usu√°rio poder√° identificar e cadastrar a localiza√ß√£o geogr√°fica
e a √°rea da sua lavoura (definir regi√£o geogr√°fica do IBGE, latitude
e longitude - a partir do \foreignlanguage{english}{Google Maps}). 
\item O usu√°rio poder√° identificar e cadastrar a microrregi√£o a que pertence
a sua lavoura. O sistema far√° uma sugest√£o de cadastro a partir dos
dados da localiza√ß√£o geogr√°fica.
\item O usu√°rio dever√° preencher o estado de cada indicador espec√≠fico nas
dimens√µes ambiental, econ√¥mica e social, devendo adaptar-se √†s condi√ß√µes
das regi√µes e microrregi√µes do Brasil.
\item O usu√°rio poder√° obter o resultado dos √≠ndices, segundo a informa√ß√£o
preenchida e a f√≥rmula de agrega√ß√£o dos indicadores.
\item O usu√°rio poder√° armazenar a informa√ß√£o dos indicadores para futuras
consultas.
\item O usu√°rio poder√° acrescentar indicadores que considere importantes
para a an√°lise. Deve-se estabelecer regras para essa funcionalidade
de tal modo que os novos indicadores (criados pelos usu√°rios) sejam
recuper√°veis de um modo separado dos indicadores cadastrados no sistema. 
\item O sistema deve fornecer um cronograma de avalia√ß√£o, sendo recomendado
realizar a avalia√ß√£o depois de cada safra.
\end{enumerate}
\selectlanguage{english}%

\subsection*{Scenarios}

\selectlanguage{brazil}%
√â uma t√©cnica que permite a descri√ß√£o das funcionalidades do sistema
desde a perspectiva do usu√°rio ou cliente, realizando uma descri√ß√£o
detalhada de cada um dos passos dos usu√°rios no sistema para completar
uma tarefa. A seguir ser√£o apresentadas as 8 hist√≥rias de usu√°rios
do SAD SustenAgro com os cen√°rios associados:

\textbf{Hist√≥ria de usu√°rio \#1:} ‚ÄúO usu√°rio poder√° identificar e
cadastrar a localiza√ß√£o geogr√°fica e a √°rea da sua lavoura (definir
regi√£o geogr√°fica do IBGE, latitude e longitude - a partir do \foreignlanguage{english}{Google
Maps}).‚Äù
\begin{enumerate}
\item O usu√°rio ingressa na conta dele, atrav√©s do sistema web SustenAgro
em \url{http://sustenagro.embrapa.br}, e o sistema apresenta a tela
‚Äú\foreignlanguage{english}{Home}‚Äù 
\item O usu√°rio seleciona a aba ‚Äúunidades produtivas‚Äù e d√° um \foreignlanguage{english}{click}
em ``cadastrar unidade produtiva'', o sistema apresenta a tela de
cadastro de unidades produtivas, onde tem um mapa do \foreignlanguage{english}{Google
Maps} 
\item O usu√°rio seleciona no mapa um ponto que identificar√° a localiza√ß√£o
da unidade produtiva, se ele quiser, tamb√©m √© poss√≠vel marcar a √°rea
da lavoura para que o sistema possa ter dados mais espec√≠ficos para
o processo de avalia√ß√£o de sustentabilidade. Uma vez terminado, o
usu√°rio d√° um \foreignlanguage{english}{click} no bot√£o ‚Äúpr√≥ximo‚Äù
e o sistema cadastra a informa√ß√£o preenchida. 
\end{enumerate}
\textbf{Hist√≥ria de usu√°rio \#2}: ‚ÄúO usu√°rio poder√° identificar e
cadastrar a microrregi√£o a que pertence a unidade produtiva dele,
por meio de uma sugest√£o que o sistema faz com os dados da localiza√ß√£o
geogr√°fica.‚Äù
\begin{enumerate}
\item O usu√°rio poder√° fazer a ‚ÄúHistoria de usu√°rio \#1‚Äù ou entrar no sistema
e continuar com o cadastro da unidade produtiva de onde ele tenha
parado. O sistema apresentar√° uma tela com sugest√µes de microrregi√µes. 
\item O usu√°rio poder√° escolher a microrregi√£o, onde esteja localizada a
unidade produtiva, e salv√°-la no sistema por meio do bot√£o ``pr√≥ximo''. 
\end{enumerate}
\textbf{Hist√≥ria de usu√°rio \#3:} ‚ÄúO usu√°rio dever√° preencher o estado
de cada indicador espec√≠fico nas dimens√µes ambiental, econ√¥mica e
social. Esses indicadores devem adaptar-se √†s condi√ß√µes das regi√µes
e microrregi√µes do Brasil, da mesma forma as faixas de limiares de
sustentabilidade foram definidas.''
\begin{enumerate}
\item O usu√°rio poder√° fazer a ‚ÄúHist√≥ria de usu√°rio \#2‚Äù ou entrar no sistema
e continuar com o cadastro dos indicadores de onde ele tenha parado.
O sistema apresentar√° uma tela com tr√™s abas que cont√©m os controles
que permitir√£o fazer o cadastro dos indicadores nas dimens√µes ambiental,
econ√¥mica e social. 
\item O usu√°rio d√° um \foreignlanguage{english}{click} na primeira aba e
come√ßa a preencher os dados dos indicadores ambientais, principalmente
os limiares que identificam o estado do indicador. A interface tamb√©m
permite eliminar ou acrescentar indicadores espec√≠ficos, por parte
dos usu√°rios (funcionalidade que √© explicada na ‚ÄúHst√≥ria de usu√°rio
\#4‚Äù). 
\item O usu√°rio preenche os dados das outras duas dimens√µes e o sistema
salva as mudan√ßas.
\end{enumerate}
\textbf{Hist√≥ria de usu√°rio \#4:} ‚ÄúPermitir o emprego da metodologia
para avalia√ß√£o caso a caso: possibilitar que o usu√°rio selecione quais
indicadores vai utilizar. Dentro dos indicadores, ele pode recomendar
limiares mais adequados para a sua realidade, tamb√©m pode inserir
novos indicadores\slash{}limiares.‚Äù
\begin{enumerate}
\item O usu√°rio poder√° fazer a ‚ÄúHistoria de usu√°rio \#3‚Äù ou entrar no sistema
e continuar na tela de cadastro de indicadores e, quando acontecer
que o usu√°rio precise de um indicador que n√£o seja oferecido pelo
sistema, o usu√°rio poder√° acrescent√°-lo por meio do bot√£o ‚Äúacrescentar
indicador‚Äù 
\item O usu√°rio d√° um \foreignlanguage{english}{click} no bot√£o ‚Äúacrescentar
indicador‚Äù e lhe √© apresentada uma interface de entrada, onde ele
dever√° cadastrar o t√≠tulo, a descri√ß√£o, os limiares, a medida do manejo
e a justificativa desse indicador. Em seguida preencher o estado do
indicador. O sistema salva esses dados inseridos. 
\item O usu√°rio tamb√©m poder√° eliminar alguns indicadores segundo seu crit√©rio.
\end{enumerate}
\textbf{Hist√≥ria de usu√°rio \#5:} \textquotedbl{}O usu√°rio poder√°
obter o resultado dos √≠ndices segundo a informa√ß√£o preenchida e a
formula de agrega√ß√£o dos indicadores.\textquotedbl{}
\begin{enumerate}
\item Depois de terminada a ‚ÄúHist√≥ria de usu√°rio \#4‚Äù, o sistema far√° a
avalia√ß√£o, que foi definida no sistema pelos especialistas. 
\item O resultado da avalia√ß√£o ser√° cadastrado no sistema com informa√ß√µes
sobre a metodologia utilizada.
\item A metodologia de avalia√ß√£o pode ser atualizada pelos administradores
para uso em avalia√ß√µes futuras.
\end{enumerate}
\textbf{Hist√≥ria de usu√°rio \#6:} ``O usu√°rio poder√° armazenar a
informa√ß√£o dos indicadores para futuras consultas.''
\begin{enumerate}
\item O usu√°rio preenche alguns indicadores nos formul√°rios do SustenAgro. 
\item Esses dados ser√£o salvos quando o usu√°rio mudar de formul√°rio ou quando
der um \foreignlanguage{english}{click} no bot√£o ``pr√≥ximo''.
\end{enumerate}
\textbf{Hist√≥ria de usu√°rio \#7:} ``O usu√°rio poder√° acrescentar
indicadores que considere importantes para sua an√°lise, devem-se estabelecer
regras para essa funcionalidade de tal modo que os novos indicadores
(criados pelos usu√°rios) sejam recuper√°veis de um modo separado dos
indicadores cadastrados no sistema.''
\begin{enumerate}
\item Quando o usu√°rio estiver preenchendo os indicadores gerados pelo sistema,
o sistema fornecer√° um conjunto de controles que permitam a inclus√£o
de um novo indicador. Esse novo indicador ser√° definido pelo pr√≥prio
usu√°rio baseado na sua experi√™ncia na √°rea. 
\item O sistema armazenar√° esse novo indicador com uma classifica√ß√£o especial
que permita sua identifica√ß√£o e separa√ß√£o dos outros indicadores. 
\item O usu√°rio poder√° preencher os dados do novo indicador, para que sejam
inclusos na avalia√ß√£o de sustentabilidade.
\end{enumerate}
\textbf{Hist√≥ria de usu√°rio \#8:} ``Cronograma de avalia√ß√£o, depois
de cada safra.''
\begin{enumerate}
\item Depois de fazer o cadastro da fazenda e das culturas que s√£o plantadas
nela, o sistema poder√° identificar quando termina cada safra, gerando
um alerta para que o usu√°rio fa√ßa o processo de avalia√ß√£o nessa data.
\item O usu√°rio ler√° o alerta e poder√° fazer o processo de avalia√ß√£o de
sustentabilidade. 
\end{enumerate}
\selectlanguage{english}%

\subsection*{Storyboard}

Storyboards\foreignlanguage{brazil}{ s√£o similares aos cen√°rios. Elas
ilustram a intera√ß√£o necess√°ria para atingir um objetivo sem utilizar
uma lista de passos. A intera√ß√£o √© visualizada por meio de uma hist√≥ria
em quadrinhos.}

\selectlanguage{brazil}%
Essa representa√ß√£o permite uma vis√£o hol√≠stica da intera√ß√£o do usu√°rio,
com √™nfase nos aspectos funcionais da intera√ß√£o e n√£o nos aspectos
da interface de usu√°rio. A seguir, s√£o apresentados os textos das
\foreignlanguage{english}{storyboard} dos processos identificados:

A Figura \ref{fig:StoryBoard-1} apresenta o processo de cadastro
da localiza√ß√£o da unidade produtiva, para conseguir vincular dados
a partir da localiza√ß√£o geogr√°fica.

\begin{figure}[H]
\begin{centering}
\includegraphics[width=1\columnwidth]{\string"figures/Stroyboard 1\string".eps}
\par\end{centering}
\centering{}\caption{\textit{\emph{\small{}StoryBoard defini√ß√£o da localiza√ß√£o. \label{fig:StoryBoard-1}}}}
\end{figure}

A Figura \ref{fig:StoryBoard-2} apresenta o formul√°rio de sele√ß√£o
da microrregi√£o que faz parte da localiza√ß√£o descrita no \foreignlanguage{english}{storyboard}
anterior. Essa informa√ß√£o √© importante para caracterizar a unidade
produtiva.

\begin{figure}[H]
\begin{centering}
\includegraphics[width=1\columnwidth]{\string"figures/Stroyboard 2\string".eps}
\par\end{centering}
\caption{\textit{\emph{\small{}StoryBoard sele√ß√£o da unidade produtiva. \label{fig:StoryBoard-2}}}}

\end{figure}

A Figura \ref{fig:StoryBoard-3} apresenta o esquema do formul√°rio
de preenchimento dos indicadores que permite cadastrar uma avalia√ß√£o,
dito formul√°rio √© adapt√°vel a v√°rios tipos de dados dos indicadores,
permitindo construir interfaces amig√°veis para os usu√°rios.

\begin{figure}[H]

\includegraphics[width=1\columnwidth]{\string"figures/Stroyboard 3\string".eps}

\caption{\textit{\emph{\small{}StoryBoard mostrando o preenchimento dos indicadores.\label{fig:StoryBoard-3}}}}

\end{figure}
A Figura \ref{fig:StoryBoard-4} apresenta o processo de avalia√ß√£o
para uma unidade produtiva, segundo o m√©todo Sustenagro. Ele vai processar
os indicadores preenchidos para gerar uma an√°lise.

\begin{figure}[H]
\begin{centering}
\includegraphics[width=1\columnwidth]{\string"figures/Stroyboard 4\string".eps}
\par\end{centering}
\caption{\textit{\emph{\small{}StoryBoard}} sobre a avalia√ß√£o de unidade produtiva\label{fig:StoryBoard-4}}
\end{figure}

A Figura \ref{fig:StoryBoard-5} apresenta o formul√°rio de defini√ß√£o
de novos indicadores, por parte dos usu√°rios do sistema. Eles permitem
a integra√ß√£o de novos conceitos ao sistema. 

\begin{figure}[H]
\begin{centering}
\includegraphics[width=1\columnwidth]{\string"figures/Stroyboard 6\string".eps}
\par\end{centering}
\centering{}\caption{\textit{\emph{\small{}StoryBoard}} para cadastro de novo indicador.\label{fig:StoryBoard-5}}
\end{figure}

A Figura \ref{fig:StoryBoard-6} apresenta o relat√≥rio resultante
do processo de avalia√ß√£o. Ele √© composto pelos √≠ndices, uma tabela
dos dados cadastrados , a matriz de sustentabilidade e as recomenda√ß√µes

\begin{figure}[H]
\begin{centering}
\includegraphics[width=1\columnwidth]{\string"figures/Stroyboard 5\string".eps}
\par\end{centering}
\caption{\textit{\emph{\small{}StoryBoard}} mostrando a apresenta√ß√£o de resultados\label{fig:StoryBoard-6}}
\end{figure}


\subsection*{Mockups das Interfaces do SustenAgro}

A partir das t√©cnicas anteriores foi poss√≠vel identificar as tarefas
que os usu√°rios do sistema SustenAgro realizar√£o. O fluxo das tarefas
e os dados de cada um foram mudando na aplica√ß√£o de cada t√©cnica,
gerando varias defini√ß√µes das web UI. Uma vez identificadas as caracterizaras
essenciais da interface gr√°fica, procedeu-se a definir os Mockups
que permitiram criar uma representa√ß√£o visual das interfaces do sistema. 

O desenvolvimento dos \foreignlanguage{english}{Mockups} foram feitos
com a ferramenta \foreignlanguage{english}{Moqups} \footnote{Moqups \url{https://moqups.com/} }. 

A Figura \ref{fig:Mockup_home} mostra uma interface gr√°fica da tela
inicial do SAD SustenAgro . A interface mostra uma descri√ß√£o do sistema,
e as principais abas, entre elas a aba de Ferramenta que permite iniciar
o processo de avalia√ß√£o de sustentabilidade.

\begin{figure}[H]
\centering{}\includegraphics[width=1\columnwidth]{\string"figures/Mockup Main\string".eps}\caption{Mockup da tela inicial do SustenAgro.\label{fig:Mockup_home}}
\end{figure}

Os Mockups integram as \foreignlanguage{english}{widgets,} que permitem
avaliar a interface gr√°fica de uma maneira mais pr√≥xima √† interface
final e assim suportar a sua avalia√ß√£o por parte dos especialistas
do dom√≠nio.  

A Figura \ref{fig:Mockup_indicators} apresenta os passos do processo
de avalia√ß√£o, na ordem representada pela numera√ß√£o das abas. Esta
tela corresponde ao formul√°rio de cadastro dos indicadores, que permite
cadastrar o valor correspondente a cada indicador.

\begin{figure}[H]
\centering{}\includegraphics[width=1\columnwidth]{figures/Tool_environmental_indicators}\caption{Mockup da tela de indicadores do SustenAgro.\label{fig:Mockup_indicators}}
\end{figure}

Na apresenta√ß√£o dos Mockups aos especialistas foram identificadas
varias mudan√ßas para facilitar a navegabilidade da \foreignlanguage{english}{web
UI,} as mudan√ßas corresponderam √† integra√ß√£o de tarefas e a melhora
na apresenta√ß√£o dos formul√°rios e dos resultados de avalia√ß√£o. Estas
mudan√ßas reestruturaram o \foreignlanguage{english}{look-and-feel}
do SAD. 

\subsection*{Prot√≥tipo da Interface Gr√°fica do SustenAgro}

A partir das melhoras dos prot√≥tipos visuais identificadas nas avalia√ß√µes
dos Mockups, foram identificadas as caracter√≠sticas da web UI, com
as quais foi desenvolvido um prot√≥tipo funcional da interface gr√°fica
do SustenAgro, que inicialmente s√≥ permitia interagir com dados simulados.

A web UI do SAD SustenAgro, foi integrada com cada uma das funcionalidades
do SAD em cada ciclo de desenvolvimento, e actualmente est√° dispon√≠vel
nos servidores do laborat√≥rio Interm√≠dia do ICMC\nobreakdash-USP
\footnote{http://biomac.icmc.usp.br:8080/sustenagro/}. 

Na Figura \ref{fig:Home} √© apresentada a p√°gina inicial do prot√≥tipo.

\begin{figure}[H]
\begin{centering}
\includegraphics[width=1\textwidth]{figures/home}
\par\end{centering}
\caption{Prot√≥tipo do SustenAgro ‚Äì Tela incial.\label{fig:Home}}
\end{figure}

Nessa tela pode-se observar o texto explicativo da ferramenta e as
abas de ``In√≠cio'', ``Ferramenta'' e ``Contato''. A op√ß√£o ``Ferramenta''
permite iniciar o processo de avalia√ß√£o de sustentabilidade.

Uma vez cadastrada uma unidade produtiva, disponibiliza-se a op√ß√£o
de criar nova avalia√ß√£o. Essa, a√ß√£o vai gerar a tela da Figura \ref{fig:Indicators},
que permite visualizar os indicadores para que os usu√°rios preencham
cada um, segundo a realidade da unidade produtiva em avalia√ß√£o. Cada
indicador tem v√°rias op√ß√µes de resposta que est√£o ligadas a valores
que quantificam a sustentabilidade. Esses valores est√£o definidos
na ontologia de sustentabilidade (a ontologia SustenAgro) e s√£o usados
nas f√≥rmulas para gerar os √≠ndices de sustentabilidade. 

Na Figura \ref{fig:Indicators}, √© apresentado o formul√°rio dos indicadores
de efici√™ncia. Eles s√£o subdivididos em efici√™ncia de produ√ß√£o e tecnol√≥gica.
Na Figura \ref{fig:Indicators}, √© mostrado o indicador Manejo, como
exemplo. Um tipo de manejo foi escolhido e o peso desse indicador
foi declarado como direto. Esses valores ser√£o usados nas f√≥rmulas
da avalia√ß√£o da sustentabilidade.

\begin{figure}[H]
\noindent \begin{centering}
\includegraphics[width=1\columnwidth]{figures/SustenAgro-scenario}
\par\end{centering}
\caption{Cadastro de indicadores \label{fig:Indicators}}
\end{figure}

A partir dos dados cadastrados, s√£o gerados os resultados do sistema.
Eles consistem na planilha de efici√™ncia e custo, na planilha da sustentabilidade
e o relat√≥rio do sistema. As planilhas permitem visualizar os atributos
dos indicadores e a tela de relat√≥rio apresenta a matriz de sustentabilidade,
onde s√£o relacionados os √≠ndices de efici√™ncia e de sustentabilidade.
O relat√≥rio √© apresentado na Figura \ref{fig:Planilhas-de-resultado}. 

\begin{figure}[H]
\noindent \begin{centering}
\includegraphics[width=1\columnwidth]{figures/SustenAgro-results}
\par\end{centering}
\caption{Planilhas do resultado da avalia√ß√£o \label{fig:Planilhas-de-resultado}}
\end{figure}

\selectlanguage{english}%

\section{Web Components}

\selectlanguage{brazil}%
Foram desenvolvidos dois \foreignlanguage{english}{Web Components}
espec√≠ficos para o SustenAgro. Eles geram gr√°ficos espec√≠ficos do
relat√≥rio solicitado pelos especialistas da Embrapa Meio Ambiente 

\subsection*{Matriz de Sustentabilidade}

Com a finalidade de suportar a gera√ß√£o de relat√≥rios, no formato definido
pelos especialistas do dom√≠nio, foi necess√°rio implementar dois \foreignlanguage{english}{Web
Component} espec√≠ficos. Um deles foi a \foreignlanguage{english}{widget}
intitulada Matriz de Sustentabilidade. Ela √© composta por dois eixos
que correspondem ao √≠ndice de efici√™ncia, eixo Y, e ao √≠ndice de sustentabilidade,
eixo X. Os √≠ndices tem magnitudes que s√£o dividas em segmentos que
permitem dividir a √°rea em doze quadrantes da sustentabilidade. Cada
avalia√ß√£o realizada com o m√©todo SustenAgro gerar√° dois √≠ndices que
s√£o localizados em um quadrante da matriz de sustentabilidade. Cada
quadrante est√° relacionado com uma recomenda√ß√£o espec√≠fica. 

A Figura \ref{fig:Matriz-de-sustentabilidade-widget} mostra a implementa√ß√£o
desse \foreignlanguage{english}{Web Component,} mostrando resultados
reais de uma avalia√ß√£o, com o √≠ndice de sustentabilidade avaliado
em 2.33 e o √≠ndice de efici√™ncia avaliado em 2.4.

\begin{figure}[H]
\noindent \begin{centering}
\includegraphics[width=1\columnwidth]{figures/SustenAgro-matrix}
\par\end{centering}
\caption{Matriz de sustentabilidade\label{fig:Matriz-de-sustentabilidade-widget}}
\end{figure}


\subsection*{Sem√°foro da Sustentabilidade}

O \foreignlanguage{english}{Web Component} do Sem√°foro da Sustentabilidade
foi o segundo componente para gera√ß√£o de relat√≥rios, no formato definido
pelos especialistas do dom√≠nio, desenvolvido para o m√©todo SustenAgro.
Ele tem um eixo que quantifica o valor da sustentabilidade normalizado
entre -100 at√© +100, dividindo o intervalo em 5 segmentos que correspondem
√†s categorias de sustentabilidade. 

A Figura \ref{fig:Sem=0000E1foro-de-sustentabilidade} mostra esse
componente no sistema SustenAgro com os valores para de avalia√ß√£o
de sustentabilidade que gerou um √≠ndice de sustentabilidade geral
de 4 em escala de -100 at√© +100.

\begin{figure}[H]
\noindent \begin{centering}
\includegraphics[width=1\columnwidth]{figures/SustenAgro-semaphore}
\par\end{centering}
\caption{Sem√°foro de sustentabilidade \label{fig:Sem=0000E1foro-de-sustentabilidade}}

\end{figure}

\selectlanguage{english}%

\section{DSL: code}

\selectlanguage{brazil}%
A implementa√ß√£o de uma DSL permite aos especialistas do dom√≠nio definir
como s√£o usados e apresentados os conceitos da ontologia, por meio
de elementos da interface gr√°fica, como os √≠ndices de sustentabilidade
ser√£o calculados e quais os elementos presentes no relat√≥rio final.
A DSL permite a cria√ß√£o de SADs facilmente adapt√°veis √†s mudan√ßas
do dom√≠nio. Os pr√≥prios especialistas podem modific√°-la sem o aux√≠lio
de programadores.

Para definir o comportamento do SustenAgro, especialistas tiveram
que:

\subsection{Definir o Objeto da Avalia√ß√£o}

No comando, a seguir \ref{alg:DSL-EvaluationObject} , o Objeto de
Avalia√ß√£o √© definido como uma inst√¢ncia da classe ProductionUnit.
Essa classe foi definida pelos pr√≥prios especialistas na ontologia
e tem como filhos as classes \foreignlanguage{english}{\emph{Farm}}
e \foreignlanguage{english}{\emph{Power Plant}} . Tamb√©m s√£o declaradas
todas as propriedades que os usu√°rios ter√£o que preencher quando criarem
uma avalia√ß√£o. Por exemplo, na propriedade \textit{hasName} os usu√°rios
devem preencher o nome da unidade de produ√ß√£o.

\begin{algorithm}[H]
\inputencoding{latin9}\begin{lstlisting}[breaklines=true]
evaluationObject ':ProductionUnit', {             
  instance 'ui:hasName', label: ['en': 'Production unit or farm name', 'pt': 'Nome da unidade produtiva ou fazenda']
  instance ':hasAgriculturalProductionSystem', label: ['en': 'Agricultural production system' , 'pt': "Sistema de produÁ„o agrÌcola"]   
  type label: ['en': "Production unit type", 'pt': "Tipo da unidade produtiva"]
  instance  ':hasSugarcaneSource', label: ['en': 'Sugarcane source', 'pt': "Origem da cana"], multipleSelection: true, required: true
  instance 'dbp:state', label: ['en': 'State', 'pt': 'Estado']
  instance 'ui:hasMicroregion', label: ['en': 'Production unit microregion', 'pt': "Microrregi„o da unidade produtiva"]
  instance ':hasAvailabilityOfEvaluationResults', label: ['en': "Availability of evaluation results", 'pt': "DisponibilizaÁ„o dos resultados da avaliaÁ„o"]
}
\end{lstlisting}
\inputencoding{utf8}
\caption{DSL que define o Evaluation Object \label{alg:DSL-EvaluationObject}}

\end{algorithm}


\subsection{Definir as caracter√≠sticas a serem avaliadas}

Agora os especialistas t√™m que escolher quais caracter√≠sticas (Features)
dos Objetos de Avalia√ß√£o ser√£o usadas. No comando \textit{feature},
s√£o indicadas as classes das \textit{Features} a serem usadas. Ser√£o
mostradas todas as \textit{features} das classes indicadas e de suas
descendentes. Por exemplo, o comando \textit{feature ':ProductionEfficiencyFeature'}
vai mostrar todas as \textit{Features} relacionadas com efici√™ncia
da produ√ß√£o. Na ontologia SustenAgro foram estabelecidas as fam√≠lias
de \foreignlanguage{english}{\textit{Features}}: EnvironmentalIndicator,
EconomicIndicator, SocialIndicator, ProductionEfficiencyFeature e
TechnologicalEfficiencyFeature.

O comando \textit{feature} tamb√©m permite dizer se existir√£o novas
\textit{Features} criadas pelos usu√°rios ('extraFeatures': true) e
a apresenta√ß√£o condicional de grupos de Features. No exemplo do algoritmo
\ref{alg:DSL-Defini=0000E7=0000E3o-de-Features} , s√£o mostradas
Features industriais apenas √† usu√°rios de usinas.

\begin{algorithm}
\inputencoding{latin9}\begin{lstlisting}[breaklines=true]
feature ':EnvironmentalIndicator', 'extraFeatures': true 
feature ':EconomicIndicator', 'extraFeatures': true 
feature ':SocialIndicator', 'extraFeatures': true 
feature ':ProductionEfficiencyFeature' 
feature ':TechnologicalEfficiencyFeature', {          
  conditional ":ProductionUnit", 'http://dbpedia.org/ontology/Provider', {
    include ':TechnologicalEfficiencyInTheField'          
  }
  conditional ":ProductionUnit", 'http://dbpedia.org/resource/PhysicalPlant', {
    include ':TechnologicalEfficiencyInTheField', ':TechnologicalEfficiencyInTheIndustrial'          
  }  
}
\end{lstlisting}
\inputencoding{utf8}
\caption{Defini√ß√£o de \foreignlanguage{english}{Features \label{alg:DSL-Defini=0000E7=0000E3o-de-Features}}}

\end{algorithm}


\subsection{Definir o modelamento e a forma de apresenta√ß√£o dos resultados}

Finalmente, no comando \textit{data}, os especialistas definem o nome
da vari√°vel que cont√©m as respostas dos usu√°rios e, no comando \textit{report},
fazem o c√°lculo do modelamento e definem o que vai ser apresentado.
No algoritmo \ref{alg:SustenAgro-DSL} , √© poss√≠vel ver o c√°lculo
dos √≠ndices de sustentabilidade e efici√™ncia atrav√©s das formulas
do modelo usado pelo SustenAgro. √â poss√≠vel usar qualquer comando
da linguagem Groovy ou biblioteca externa. As vari√°veis guardam os
valores de interesse que ser√£o mostrados no relat√≥rio de avalia√ß√£o.
No caso do SustenAgro, a vari√°vel \foreignlanguage{english}{\textit{sustainability}}
guarda o √≠ndice de sustentabilidade e a vari√°vel \textit{efficiency}
guarda o √≠ndice de efici√™ncia do sistema.

No relat√≥rio aparecer√£o a Matriz de Sustentabilidade (SustainabilityMatrix),
o Sem√°foro de Sustentabilidade (SustainabilitySemaphore), o texto
\textquotedbl{}Mapa da Microregi√£o\textquotedbl{} e o mapa da microregi√£o
(onde a unidade produtiva se encontra). Cada uma dessas widget √© instanciada
na DSL e os valores de interesse s√£o passados para os Web Components
encarregados da apresenta√ß√£o. O framework Decisioner delega aos Web
Components a tarefa de apresenta√ß√£o.

Usu√°rios podem pedir a gera√ß√£o de relat√≥rios em pdf, uma ferramenta
de convers√£o de HTML para pdf √© usada.

\begin{algorithm}[H]
\inputencoding{latin9}\begin{lstlisting}[breaklines=true]
data 'data'
report {       
  environment =   weightedSum(data.':EnvironmentalIndicator')
  economic    =   weightedSum(data.':EconomicIndicator')     
  social      =   weightedSum(data.':SocialIndicator')  
  
  sustainability = (environment + social + economic)/3

  cost_production_efficiency = sum(data.':ProductionEfficiencyFeature')
  technologicalEfficiencyInTheField = 0.8*weightedSum(data.':TechnologicalEfficiencyInTheField')
  technologicalEfficiencyInTheIndustrial = 0.2*weightedSum(data.':TechnologicalEfficiencyInTheIndustrial')

  efficiency = Math.abs(cost_production_efficiency) * (technologicalEfficiencyInTheField+technologicalEfficiencyInTheIndustrial)

  sustainabilityMatrix x: sustainability, y: efficiency,  
                       label_x: ['en': 'Sustainability Index', 'pt': 'Õndice de Sustentabilidade'],                 
                       label_y: ['en': 'Efficiency index', 'pt': 'Õndice de EficiÍncia'],
                       range_x: [-43,43],
                       range_y: [-160,800],
                       quadrants: [4,3]                       
   
  sustainabilitySemaphore value: sustainability,                  
                          label: ['en': 'Sustainability Level', 'pt': 'Õndice da sustentabilidade geral'],
                          range: [-60,60]    

  text 'en': 'Microregion map', 'pt': '**Mapa da microregi„o**'    

  map data.'Microregion'   
}
\end{lstlisting}
\inputencoding{utf8}
\caption{SustenAgro DSL \label{alg:SustenAgro-DSL}}

\end{algorithm}


\section{Considera√ß√µes Finais}

O desenvolvimento do sistema Sustenagro satisfez uma necessidade presente
na unidade da Embrapa Meio Ambiente: um sistema de avalia√ß√£o de sustentabilidade
em cana-de-a√ß√∫car no centro-sul do Brasil. O SAD SustenAgro representa
e permite complementar informa√ß√µes e dados do estado atual de sustentabilidade
nas fazendas e usinas. Ele produz relat√≥rios com a finalidade de embasar
e formalizar pol√≠ticas para promover pr√°ticas produtivas mais sustent√°veis,
de acordo com crit√©rios ambientais, sociais e econ√¥micos.

Al√©m de satisfazer uma necessidade institucional, o SustenAgro √© uma
proposta de SAD baseado em conhecimento e vinculado √†s tecnologias
da web sem√¢ntica. O SustenAgro n√£o foi apenas uma instancia√ß√£o do
framework Decisioner, ele definiu o pr√≥prio framework. Atrav√©s do
desenvolvimento do SustenAgro, foi poss√≠vel determinar as caracter√≠sticas
gerais desse tipo de SAD, e implement√°-las no framework, e as caracter√≠sticas
espec√≠ficas do Sustenagro, que foram implementadas usando a ontologia
SustenAgro, os dois Web Components e a DSL.

Tendo o sistema SustenAgro instanciado e rodando, foi poss√≠vel validar
suas funcionalidades atrav√©s de alguns experimentos com integrantes
do projeto SustenAgro da Embrapa. Os resultados obtidos nas avalia√ß√µes
dos experimentos ser√£o detalhados no pr√≥ximo cap√≠tulo.
