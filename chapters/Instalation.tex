A instala√ß√£o dos Sistemas Decisioner e SustenAgro divide-se em dois
processos, a configura√ß√£o do servidor web e o \foreignlanguage{english}{deploy}
do arquivo \foreignlanguage{english}{Web Application Archive (WAR\nomenclature{WAR}{Web Application Archive})}.
A continua√ß√£o s√£o descritos ambos processos:

\section{Configura√ß√£o do servidor.}

Esta fase do processo consiste em instalar as tecnologias Java, Apache
\foreignlanguage{english}{Tomcat}, \foreignlanguage{english}{WkHtmltoPdf}
e a \foreignlanguage{english}{triplestore} \foreignlanguage{english}{Blazegraph},
em um servidor baseado em \foreignlanguage{english}{linux}. Atualmente
o sistema foi configurado e testado em uma m√°quina virtual com Ubuntu
14.04, Java \foreignlanguage{english}{OpenJDK} 8, Apache \foreignlanguage{english}{Tomcat},
\foreignlanguage{english}{WkHtmltoPdf} 0.12.3 e a \foreignlanguage{english}{triplestore}
\foreignlanguage{english}{Blazegraph} 2.1.0. A instala√ß√£o destas tecnologias
segue uma orienta√ß√£o padr√£o que ser√° descrita a continua√ß√£o:

\subsection*{Instala√ß√£o do Java:}

Segundo a documenta√ß√£o de Java \foreignlanguage{english}{OpenJDK},
a instala√ß√£o √© realizada pelo comando:

\begin{algorithm}[H]
\inputencoding{latin9}\begin{lstlisting}[caption={InstalaÁ„o do Java}]
sudo apt-get update
sudo apt-get install openjdk-8-jre
\end{lstlisting}
\inputencoding{utf8}\end{algorithm}


\subsection*{Instala√ß√£o do \foreignlanguage{english}{Apache Tomcat}}

A instala√ß√£o do \foreignlanguage{english}{Apache Tomcat} depende da
instala√ß√£o do Java 8, e o \foreignlanguage{english}{Tomcat} vers√£o
7 para suportar a compatibilidade do \foreignlanguage{english}{War}
gerado, isto √© documentado no site\footnote{https://grails.org/wiki/Deployment}
do framework \foreignlanguage{english}{Grails}, que exige uma vers√£o
7 de \foreignlanguage{english}{Apache Tomcat} para suportar o \foreignlanguage{english}{deploy}
dos arquivos \foreignlanguage{english}{WAR}.

O processo de instala√ß√£o consiste em fazer download dos arquivos bin√°rios,
extrair eles em \foreignlanguage{english}{/opt/tomcat/}, exportar
as vari√°veis de entorno e executar o \foreignlanguage{english}{Web
Server}, com c√≥digo:

\begin{algorithm}[H]
\inputencoding{latin9}\begin{lstlisting}[caption={InstalaÁ„o do Apache Tomcat}]
wget http://www-eu.apache.org/dist/tomcat/tomcat-7/v7.0.70/bin/
apache-tomcat-7.0.70.tar.gz

tar xvzf apache-tomcat-7.0.70.tar.gz -C /opt/tomcat

sudo /opt/tomcat/bin/startup.sh
\end{lstlisting}
\inputencoding{utf8}\end{algorithm}

Configurar \foreignlanguage{english}{users} de \foreignlanguage{english}{Tomcat}
em: \foreignlanguage{english}{/opt/tomcat/conf/tomcat-users.xml }e
acrescentar os Rol e \foreignlanguage{english}{User}

\begin{algorithm}[H]
\inputencoding{latin9}\begin{lstlisting}[caption={ConfiguraÁ„o dos Users}]
<role rolename="manager-gui"/> 
<user username="admin" password="s3cr3t" roles="manager-gui"/>
\end{lstlisting}
\inputencoding{utf8}\end{algorithm}

Depois disso, √© registrado no final do arquivo \textasciitilde{}/.bashrc
os pr√≥ximos dois comandos que definem as vari√°veis de entorno

\begin{algorithm}[H]
\inputencoding{latin9}\begin{lstlisting}[caption={Exportar vari·veis de entorno}]
export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64 
export CATALINA_HOME=/opt/tomcat
\end{lstlisting}
\inputencoding{utf8}\end{algorithm}

Finalmente executar o comando, e verificar a execu√ß√£o do programa
na URL /manager do dom√≠nio do servidor

\begin{algorithm}[H]
\inputencoding{latin9}\begin{lstlisting}[caption={Iniciar o servidor}]
sudo /opt/tomcat/bin/startup.sh
\end{lstlisting}
\inputencoding{utf8}\end{algorithm}


\subsection*{Instala√ß√£o do \foreignlanguage{english}{WkHtmltoPdf}}

A tecnologia \foreignlanguage{english}{WkHtmltoPdf} permite converter
p√°ginas web em formato \foreignlanguage{english}{HTML} a \foreignlanguage{english}{Portable
Document Format (PDF}\nomenclature{PDF}{Portable Document Format}),
suportando a funcionalidade de gerar os reportes em formato PDF. A
instala√ß√£o consiste em fazer download dos arquivos bin√°rios e a configura√ß√£o
de um X Server Virual para suportar o renderizado, os comandos s√£o
mostrados a continua√ß√£o:

\begin{algorithm}[H]
\inputencoding{latin9}\begin{lstlisting}[caption={InstalaÁ„o do wkhtmltopdf }]
wget http://download.gna.org/wkhtmltopdf/0.12/0.12.3/
wkhtmltox-0.12.3_linux-generic-amd64.tar.xz

tar xf wkhtmltox-0.12.3_linux-generic-amd64.tar.xz

cp wkhtmltox/bin/wkhtmltopdf /usr/local/bin/wkhtmltopdf

sudo chmod a+x /usr/local/bin/wkhtmltopdf

sudo apt-get install openssl build-essential xorg libssl-dev
\end{lstlisting}
\inputencoding{utf8}\end{algorithm}

Depois disto √© criado um \foreignlanguage{english}{script wkhtmltopdf.sh}
em \foreignlanguage{english}{/usr/local/bin/} e cont√©m o seguinte
comando:

\begin{algorithm}[H]
\inputencoding{latin9}\begin{lstlisting}[caption={ExecuÁ„o do wkhtmltopdf}]
xvfb-run -a -s "-screen 0 640x480x16" wkhtmltopdf "$@"
sudo chmod a+x /usr/local/bin/wkhtmltopdf.sh 
\end{lstlisting}
\inputencoding{utf8}\end{algorithm}

O comando \foreignlanguage{english}{wkhtmltopdf.sh} √© poss√≠vel converter
a \foreignlanguage{english}{PDF} desde um sistema sem X11

\subsubsection*{Instala√ß√£o da \foreignlanguage{english}{Triplestore Blazegraph}}

A instala√ß√£o do \foreignlanguage{english}{Blazegraph} consiste em
fazer download do arquivo bin√°rio e executar com o arquivo de configura√ß√£o
RWStore2.properties o servi√ßo de \foreignlanguage{english}{triplestore}.

\begin{algorithm}[H]
\inputencoding{latin9}\begin{lstlisting}[caption={InstalaÁ„o do \foreignlanguage{english}{Blazegraph}}]
wget https://sourceforge.net/projects/bigdata/files/bigdata/
2.1.1/blazegraph.jar

wget https://dl.dropboxusercontent.com/u/24827919/
SustenAgro/RWStore2.properties

java -server -Xmx4g -Dbigdata.propertyFile=RWStore2.properties 
-jar blazegraph.jar
\end{lstlisting}
\inputencoding{utf8}\end{algorithm}

\selectlanguage{english}%

\section{Deploy\foreignlanguage{brazil}{ do arquivo }WAR}

\selectlanguage{brazil}%
O \foreignlanguage{english}{deploy} do sistema consiste em executar
os servi√ßos do \foreignlanguage{english}{Tomcat} 7 e \foreignlanguage{english}{Triplestore},
e fazer \foreignlanguage{english}{upload} do arquivo SustenAgro-1.0.war
ao servidor Apache Tomcat para fazer o \foreignlanguage{english}{deploy}
no \foreignlanguage{english}{path} ``/'', e finalmente reiniciar
o \foreignlanguage{english}{Tomcat}.

\begin{algorithm}[H]
\inputencoding{latin9}\begin{lstlisting}[caption={ExecuÁ„o do sustenagro}]
wget https://dl.dropboxusercontent.com/u/24827919/
SustenAgro/sustenagro-1.0.war
\end{lstlisting}
\inputencoding{utf8}\end{algorithm}

